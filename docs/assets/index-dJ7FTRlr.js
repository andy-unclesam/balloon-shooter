(function(){const h=document.createElement("link").relList;if(h&&h.supports&&h.supports("modulepreload"))return;for(const b of document.querySelectorAll('link[rel="modulepreload"]'))x(b);new MutationObserver(b=>{for(const g of b)if(g.type==="childList")for(const N of g.addedNodes)N.tagName==="LINK"&&N.rel==="modulepreload"&&x(N)}).observe(document,{childList:!0,subtree:!0});function d(b){const g={};return b.integrity&&(g.integrity=b.integrity),b.referrerPolicy&&(g.referrerPolicy=b.referrerPolicy),b.crossOrigin==="use-credentials"?g.credentials="include":b.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function x(b){if(b.ep)return;b.ep=!0;const g=d(b);fetch(b.href,g)}})();class yr{constructor(){this.clouds=[],this.width=window.innerWidth,this.height=window.innerHeight,this.initClouds()}resize(h,d){this.width=h,this.height=d}initClouds(){for(let h=0;h<10;h++)this.clouds.push(this.createCloud())}createCloud(){return{x:Math.random()*this.width,y:Math.random()*(this.height*.6),size:50+Math.random()*100,speed:.01+Math.random()*.05,opacity:.3+Math.random()*.5}}update(h){this.clouds.forEach(d=>{d.x+=d.speed*h,d.x>this.width+d.size&&(d.x=-d.size,d.y=Math.random()*(this.height*.6))})}draw(h,d,x){const b=h.createLinearGradient(0,0,0,x);b.addColorStop(0,"#87CEEB"),b.addColorStop(1,"#E0F7FA"),h.fillStyle=b,h.fillRect(0,0,d,x),this.clouds.forEach(g=>{h.fillStyle=`rgba(255, 255, 255, ${g.opacity})`,h.beginPath(),h.arc(g.x,g.y,g.size,0,Math.PI*2),h.arc(g.x+g.size*.5,g.y-g.size*.2,g.size*.8,0,Math.PI*2),h.arc(g.x-g.size*.5,g.y-g.size*.2,g.size*.8,0,Math.PI*2),h.fill()})}}class mr{constructor(h,d){this.balloons=[],this.gameWidth=h,this.gameHeight=d,this.spawnTimer=0,this.spawnInterval=1e3,this.wind=0,this.windTimer=0}resize(h,d){this.gameWidth=h,this.gameHeight=d}update(h){this.spawnTimer+=h,this.spawnTimer>this.spawnInterval&&(this.spawnBalloon(),this.spawnTimer=0,this.spawnInterval=800+Math.random()*500),this.windTimer+=h,this.windTimer>5e3&&(this.wind=(Math.random()-.5)*.1,this.windTimer=0);for(let d=this.balloons.length-1;d>=0;d--){const x=this.balloons[d];x.y-=x.speed*h,x.x+=Math.sin(x.y*.01+x.wobbleOffset)*.5+this.wind*h,x.y<-x.radius*2&&this.balloons.splice(d,1)}}spawnBalloon(){const h=20+Math.random()*30,d=.1+(50-h)*.005,x={x:Math.random()*this.gameWidth,y:this.gameHeight+h,radius:h,speed:d,color:`hsl(${Math.random()*360}, 70%, 60%)`,wobbleOffset:Math.random()*Math.PI*2,popped:!1};this.balloons.push(x)}draw(h){this.balloons.forEach(d=>{h.fillStyle=d.color,h.beginPath(),h.arc(d.x,d.y,d.radius,0,Math.PI*2),h.fill(),h.fillStyle="rgba(255, 255, 255, 0.3)",h.beginPath(),h.arc(d.x-d.radius*.3,d.y-d.radius*.3,d.radius*.2,0,Math.PI*2),h.fill(),h.strokeStyle="rgba(255, 255, 255, 0.5)",h.beginPath(),h.moveTo(d.x,d.y+d.radius),h.lineTo(d.x,d.y+d.radius+20),h.stroke()})}checkHit(h,d){for(let x=this.balloons.length-1;x>=0;x--){const b=this.balloons[x],g=b.x-h,N=b.y-d;if(Math.sqrt(g*g+N*N)<b.radius)return this.balloons.splice(x,1),b}return null}}var $t=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},we={},En;function gr(){return En||(En=1,(function(){var M;function h(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}var d=typeof Object.defineProperties=="function"?Object.defineProperty:function(t,e,n){return t==Array.prototype||t==Object.prototype||(t[e]=n.value),t};function x(t){t=[typeof globalThis=="object"&&globalThis,t,typeof window=="object"&&window,typeof self=="object"&&self,typeof $t=="object"&&$t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}var b=x(this);function g(t,e){if(e)t:{var n=b;t=t.split(".");for(var r=0;r<t.length-1;r++){var i=t[r];if(!(i in n))break t;n=n[i]}t=t[t.length-1],r=n[t],e=e(r),e!=r&&e!=null&&d(n,t,{configurable:!0,writable:!0,value:e})}}g("Symbol",function(t){function e(s){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new n(r+(s||"")+"_"+i++,s)}function n(s,o){this.h=s,d(this,"description",{configurable:!0,writable:!0,value:o})}if(t)return t;n.prototype.toString=function(){return this.h};var r="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",i=0;return e}),g("Symbol.iterator",function(t){if(t)return t;t=Symbol("Symbol.iterator");for(var e="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<e.length;n++){var r=b[e[n]];typeof r=="function"&&typeof r.prototype[t]!="function"&&d(r.prototype,t,{configurable:!0,writable:!0,value:function(){return N(h(this))}})}return t});function N(t){return t={next:t},t[Symbol.iterator]=function(){return this},t}function _(t){var e=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:h(t)}}function G(t){if(!(t instanceof Array)){t=_(t);for(var e,n=[];!(e=t.next()).done;)n.push(e.value);t=n}return t}var lt=typeof Object.assign=="function"?Object.assign:function(t,e){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t};g("Object.assign",function(t){return t||lt});var Rt=typeof Object.create=="function"?Object.create:function(t){function e(){}return e.prototype=t,new e},bt;if(typeof Object.setPrototypeOf=="function")bt=Object.setPrototypeOf;else{var at;t:{var ht={a:!0},At={};try{At.__proto__=ht,at=At.a;break t}catch{}at=!1}bt=at?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var jt=bt;function ct(t,e){if(t.prototype=Rt(e.prototype),t.prototype.constructor=t,jt)jt(t,e);else for(var n in e)if(n!="prototype")if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(e,n);r&&Object.defineProperty(t,n,r)}else t[n]=e[n];t.ya=e.prototype}function Et(){this.m=!1,this.j=null,this.i=void 0,this.h=1,this.v=this.s=0,this.l=null}function St(t){if(t.m)throw new TypeError("Generator is already running");t.m=!0}Et.prototype.u=function(t){this.i=t};function st(t,e){t.l={ma:e,na:!0},t.h=t.s||t.v}Et.prototype.return=function(t){this.l={return:t},this.h=this.v};function R(t,e,n){return t.h=n,{value:e}}function Zt(t){this.h=new Et,this.i=t}function Qt(t,e){St(t.h);var n=t.h.j;return n?rt(t,"return"in n?n.return:function(r){return{value:r,done:!0}},e,t.h.return):(t.h.return(e),H(t))}function rt(t,e,n,r){try{var i=e.call(t.h.j,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return t.h.m=!1,i;var s=i.value}catch(o){return t.h.j=null,st(t.h,o),H(t)}return t.h.j=null,r.call(t.h,s),H(t)}function H(t){for(;t.h.h;)try{var e=t.i(t.h);if(e)return t.h.m=!1,{value:e.value,done:!1}}catch(n){t.h.i=void 0,st(t.h,n)}if(t.h.m=!1,t.h.l){if(e=t.h.l,t.h.l=null,e.na)throw e.ma;return{value:e.return,done:!0}}return{value:void 0,done:!0}}function it(t){this.next=function(e){return St(t.h),t.h.j?e=rt(t,t.h.j.next,e,t.h.u):(t.h.u(e),e=H(t)),e},this.throw=function(e){return St(t.h),t.h.j?e=rt(t,t.h.j.throw,e,t.h.u):(st(t.h,e),e=H(t)),e},this.return=function(e){return Qt(t,e)},this[Symbol.iterator]=function(){return this}}function a(t){function e(r){return t.next(r)}function n(r){return t.throw(r)}return new Promise(function(r,i){function s(o){o.done?r(o.value):Promise.resolve(o.value).then(e,n).then(s,i)}s(t.next())})}function c(t){return a(new it(new Zt(t)))}g("Promise",function(t){function e(o){this.i=0,this.j=void 0,this.h=[],this.u=!1;var u=this.l();try{o(u.resolve,u.reject)}catch(l){u.reject(l)}}function n(){this.h=null}function r(o){return o instanceof e?o:new e(function(u){u(o)})}if(t)return t;n.prototype.i=function(o){if(this.h==null){this.h=[];var u=this;this.j(function(){u.m()})}this.h.push(o)};var i=b.setTimeout;n.prototype.j=function(o){i(o,0)},n.prototype.m=function(){for(;this.h&&this.h.length;){var o=this.h;this.h=[];for(var u=0;u<o.length;++u){var l=o[u];o[u]=null;try{l()}catch(f){this.l(f)}}}this.h=null},n.prototype.l=function(o){this.j(function(){throw o})},e.prototype.l=function(){function o(f){return function(v){l||(l=!0,f.call(u,v))}}var u=this,l=!1;return{resolve:o(this.I),reject:o(this.m)}},e.prototype.I=function(o){if(o===this)this.m(new TypeError("A Promise cannot resolve to itself"));else if(o instanceof e)this.L(o);else{t:switch(typeof o){case"object":var u=o!=null;break t;case"function":u=!0;break t;default:u=!1}u?this.F(o):this.s(o)}},e.prototype.F=function(o){var u=void 0;try{u=o.then}catch(l){this.m(l);return}typeof u=="function"?this.M(u,o):this.s(o)},e.prototype.m=function(o){this.v(2,o)},e.prototype.s=function(o){this.v(1,o)},e.prototype.v=function(o,u){if(this.i!=0)throw Error("Cannot settle("+o+", "+u+"): Promise already settled in state"+this.i);this.i=o,this.j=u,this.i===2&&this.K(),this.H()},e.prototype.K=function(){var o=this;i(function(){if(o.D()){var u=b.console;typeof u<"u"&&u.error(o.j)}},1)},e.prototype.D=function(){if(this.u)return!1;var o=b.CustomEvent,u=b.Event,l=b.dispatchEvent;return typeof l>"u"?!0:(typeof o=="function"?o=new o("unhandledrejection",{cancelable:!0}):typeof u=="function"?o=new u("unhandledrejection",{cancelable:!0}):(o=b.document.createEvent("CustomEvent"),o.initCustomEvent("unhandledrejection",!1,!0,o)),o.promise=this,o.reason=this.j,l(o))},e.prototype.H=function(){if(this.h!=null){for(var o=0;o<this.h.length;++o)s.i(this.h[o]);this.h=null}};var s=new n;return e.prototype.L=function(o){var u=this.l();o.T(u.resolve,u.reject)},e.prototype.M=function(o,u){var l=this.l();try{o.call(u,l.resolve,l.reject)}catch(f){l.reject(f)}},e.prototype.then=function(o,u){function l(m,y){return typeof m=="function"?function(E){try{f(m(E))}catch(C){v(C)}}:y}var f,v,j=new e(function(m,y){f=m,v=y});return this.T(l(o,f),l(u,v)),j},e.prototype.catch=function(o){return this.then(void 0,o)},e.prototype.T=function(o,u){function l(){switch(f.i){case 1:o(f.j);break;case 2:u(f.j);break;default:throw Error("Unexpected state: "+f.i)}}var f=this;this.h==null?s.i(l):this.h.push(l),this.u=!0},e.resolve=r,e.reject=function(o){return new e(function(u,l){l(o)})},e.race=function(o){return new e(function(u,l){for(var f=_(o),v=f.next();!v.done;v=f.next())r(v.value).T(u,l)})},e.all=function(o){var u=_(o),l=u.next();return l.done?r([]):new e(function(f,v){function j(E){return function(C){m[E]=C,y--,y==0&&f(m)}}var m=[],y=0;do m.push(void 0),y++,r(l.value).T(j(m.length-1),v),l=u.next();while(!l.done)})},e});function S(t,e){t instanceof String&&(t+="");var n=0,r=!1,i={next:function(){if(!r&&n<t.length){var s=n++;return{value:e(s,t[s]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}g("Array.prototype.keys",function(t){return t||function(){return S(this,function(e){return e})}}),g("Array.prototype.fill",function(t){return t||function(e,n,r){var i=this.length||0;for(0>n&&(n=Math.max(0,i+n)),(r==null||r>i)&&(r=i),r=Number(r),0>r&&(r=Math.max(0,i+r)),n=Number(n||0);n<r;n++)this[n]=e;return this}});function w(t){return t||Array.prototype.fill}g("Int8Array.prototype.fill",w),g("Uint8Array.prototype.fill",w),g("Uint8ClampedArray.prototype.fill",w),g("Int16Array.prototype.fill",w),g("Uint16Array.prototype.fill",w),g("Int32Array.prototype.fill",w),g("Uint32Array.prototype.fill",w),g("Float32Array.prototype.fill",w),g("Float64Array.prototype.fill",w),g("Object.is",function(t){return t||function(e,n){return e===n?e!==0||1/e===1/n:e!==e&&n!==n}}),g("Array.prototype.includes",function(t){return t||function(e,n){var r=this;r instanceof String&&(r=String(r));var i=r.length;for(n=n||0,0>n&&(n=Math.max(n+i,0));n<i;n++){var s=r[n];if(s===e||Object.is(s,e))return!0}return!1}}),g("String.prototype.includes",function(t){return t||function(e,n){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(e,n||0)!==-1}});var F=this||self;function U(t,e){t=t.split(".");var n=F;t[0]in n||typeof n.execScript>"u"||n.execScript("var "+t[0]);for(var r;t.length&&(r=t.shift());)t.length||e===void 0?n[r]&&n[r]!==Object.prototype[r]?n=n[r]:n=n[r]={}:n[r]=e}function p(t){var e;t:{if((e=F.navigator)&&(e=e.userAgent))break t;e=""}return e.indexOf(t)!=-1}var A=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i=typeof t=="string"?t.split(""):t,s=0;s<n;s++)s in i&&(r[s]=e.call(void 0,i[s],s,t));return r},T={},k=null;function Y(t){var e=t.length,n=3*e/4;n%3?n=Math.floor(n):"=.".indexOf(t[e-1])!=-1&&(n="=.".indexOf(t[e-2])!=-1?n-2:n-1);var r=new Uint8Array(n),i=0;return Ct(t,function(s){r[i++]=s}),i!==n?r.subarray(0,i):r}function Ct(t,e){function n(l){for(;r<t.length;){var f=t.charAt(r++),v=k[f];if(v!=null)return v;if(!/^[\s\xa0]*$/.test(f))throw Error("Unknown base64 encoding at char: "+f)}return l}K();for(var r=0;;){var i=n(-1),s=n(0),o=n(64),u=n(64);if(u===64&&i===-1)break;e(i<<2|s>>4),o!=64&&(e(s<<4&240|o>>2),u!=64&&e(o<<6&192|u))}}function K(){if(!k){k={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++){var r=t.concat(e[n].split(""));T[n]=r;for(var i=0;i<r.length;i++){var s=r[i];k[s]===void 0&&(k[s]=i)}}}}var Z=typeof Uint8Array<"u",yt=!(p("Trident")||p("MSIE"))&&typeof F.btoa=="function";function mt(t){if(!yt){var e;e===void 0&&(e=0),K(),e=T[e];for(var n=Array(Math.floor(t.length/3)),r=e[64]||"",i=0,s=0;i<t.length-2;i+=3){var o=t[i],u=t[i+1],l=t[i+2],f=e[o>>2];o=e[(o&3)<<4|u>>4],u=e[(u&15)<<2|l>>6],l=e[l&63],n[s++]=f+o+u+l}switch(f=0,l=r,t.length-i){case 2:f=t[i+1],l=e[(f&15)<<2]||r;case 1:t=t[i],n[s]=e[t>>2]+e[(t&3)<<4|f>>4]+l+r}return n.join("")}for(e="";10240<t.length;)e+=String.fromCharCode.apply(null,t.subarray(0,10240)),t=t.subarray(10240);return e+=String.fromCharCode.apply(null,t),btoa(e)}var be=RegExp("[-_.]","g");function Cn(t){switch(t){case"-":return"+";case"_":return"/";case".":return"=";default:return""}}function Ae(t){if(!yt)return Y(t);be.test(t)&&(t=t.replace(be,Cn)),t=atob(t);for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}var je;function Jt(){return je||(je=new Uint8Array(0))}var Tt={},Tn=typeof Uint8Array.prototype.slice=="function",I=0,W=0;function Ee(t){var e=0>t;t=Math.abs(t);var n=t>>>0;t=Math.floor((t-n)/4294967296),e&&(n=_(Se(n,t)),e=n.next().value,t=n.next().value,n=e),I=n>>>0,W=t>>>0}var On=typeof BigInt=="function";function Se(t,e){return e=~e,t?t=~t+1:e+=1,[t,e]}function Ce(t,e){this.i=t>>>0,this.h=e>>>0}function Te(t){if(!t)return Oe||(Oe=new Ce(0,0));if(!/^-?\d+$/.test(t))return null;if(16>t.length)Ee(Number(t));else if(On)t=BigInt(t),I=Number(t&BigInt(4294967295))>>>0,W=Number(t>>BigInt(32)&BigInt(4294967295));else{var e=+(t[0]==="-");W=I=0;for(var n=t.length,r=e,i=(n-e)%6+e;i<=n;r=i,i+=6)r=Number(t.slice(r,i)),W*=1e6,I=1e6*I+r,4294967296<=I&&(W+=I/4294967296|0,I%=4294967296);e&&(e=_(Se(I,W)),t=e.next().value,e=e.next().value,I=t,W=e)}return new Ce(I,W)}var Oe;function Me(t,e){return Error("Invalid wire type: "+t+" (at position "+e+")")}function qt(){return Error("Failed to read varint, encoding is invalid.")}function Fe(t,e){return Error("Tried to read past the end of the data "+e+" > "+t)}function ft(){throw Error("Invalid UTF8")}function Pe(t,e){return e=String.fromCharCode.apply(null,e),t==null?e:t+e}var Bt=void 0,te,Mn=typeof TextDecoder<"u",_e,Fn=typeof TextEncoder<"u",ke;function Le(t){if(t!==Tt)throw Error("illegal external caller")}function Ot(t,e){if(Le(e),this.V=t,t!=null&&t.length===0)throw Error("ByteString should be constructed with non-empty values")}function ee(){return ke||(ke=new Ot(null,Tt))}function Re(t){Le(Tt);var e=t.V;return e=e==null||Z&&e!=null&&e instanceof Uint8Array?e:typeof e=="string"?Ae(e):null,e==null?e:t.V=e}function Pn(t){if(typeof t=="string")return{buffer:Ae(t),C:!1};if(Array.isArray(t))return{buffer:new Uint8Array(t),C:!1};if(t.constructor===Uint8Array)return{buffer:t,C:!1};if(t.constructor===ArrayBuffer)return{buffer:new Uint8Array(t),C:!1};if(t.constructor===Ot)return{buffer:Re(t)||Jt(),C:!0};if(t instanceof Uint8Array)return{buffer:new Uint8Array(t.buffer,t.byteOffset,t.byteLength),C:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function Be(t,e){this.i=null,this.m=!1,this.h=this.j=this.l=0,ne(this,t,e)}function ne(t,e,n){n=n===void 0?{}:n,t.S=n.S===void 0?!1:n.S,e&&(e=Pn(e),t.i=e.buffer,t.m=e.C,t.l=0,t.j=t.i.length,t.h=t.l)}Be.prototype.reset=function(){this.h=this.l};function dt(t,e){if(t.h=e,e>t.j)throw Fe(t.j,e)}function Mt(t){var e=t.i,n=t.h,r=e[n++],i=r&127;if(r&128&&(r=e[n++],i|=(r&127)<<7,r&128&&(r=e[n++],i|=(r&127)<<14,r&128&&(r=e[n++],i|=(r&127)<<21,r&128&&(r=e[n++],i|=r<<28,r&128&&e[n++]&128&&e[n++]&128&&e[n++]&128&&e[n++]&128&&e[n++]&128)))))throw qt();return dt(t,n),i}function Ue(t,e){if(0>e)throw Error("Tried to read a negative byte length: "+e);var n=t.h,r=n+e;if(r>t.j)throw Fe(e,t.j-n);return t.h=r,n}var Ie=[];function re(){this.h=[]}re.prototype.length=function(){return this.h.length},re.prototype.end=function(){var t=this.h;return this.h=[],t};function Ne(t,e,n){for(;0<n||127<e;)t.h.push(e&127|128),e=(e>>>7|n<<25)>>>0,n>>>=7;t.h.push(e)}function pt(t,e){for(;127<e;)t.h.push(e&127|128),e>>>=7;t.h.push(e)}function ie(t,e){if(Ie.length){var n=Ie.pop();ne(n,t,e),t=n}else t=new Be(t,e);this.h=t,this.j=this.h.h,this.i=this.l=-1,this.setOptions(e)}ie.prototype.setOptions=function(t){t=t===void 0?{}:t,this.ca=t.ca===void 0?!1:t.ca},ie.prototype.reset=function(){this.h.reset(),this.j=this.h.h,this.i=this.l=-1};function De(t){var e=t.h;if(e.h==e.j)return!1;t.j=t.h.h;var n=Mt(t.h)>>>0;if(e=n>>>3,n&=7,!(0<=n&&5>=n))throw Me(n,t.j);if(1>e)throw Error("Invalid field number: "+e+" (at position "+t.j+")");return t.l=e,t.i=n,!0}function Ut(t){switch(t.i){case 0:if(t.i!=0)Ut(t);else t:{t=t.h;for(var e=t.h,n=e+10,r=t.i;e<n;)if((r[e++]&128)===0){dt(t,e);break t}throw qt()}break;case 1:t=t.h,dt(t,t.h+8);break;case 2:t.i!=2?Ut(t):(e=Mt(t.h)>>>0,t=t.h,dt(t,t.h+e));break;case 5:t=t.h,dt(t,t.h+4);break;case 3:e=t.l;do{if(!De(t))throw Error("Unmatched start-group tag: stream EOF");if(t.i==4){if(t.l!=e)throw Error("Unmatched end-group tag");break}Ut(t)}while(!0);break;default:throw Me(t.i,t.j)}}var It=[];function _n(){this.j=[],this.i=0,this.h=new re}function gt(t,e){e.length!==0&&(t.j.push(e),t.i+=e.length)}function kn(t,e){if(e=e.R){gt(t,t.h.end());for(var n=0;n<e.length;n++)gt(t,Re(e[n])||Jt())}}var ot=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol():void 0;function vt(t,e){return ot?t[ot]|=e:t.A!==void 0?t.A|=e:(Object.defineProperties(t,{A:{value:e,configurable:!0,writable:!0,enumerable:!1}}),e)}function ze(t,e){ot?t[ot]&&(t[ot]&=~e):t.A!==void 0&&(t.A&=~e)}function B(t){var e;return ot?e=t[ot]:e=t.A,e??0}function q(t,e){ot?t[ot]=e:t.A!==void 0?t.A=e:Object.defineProperties(t,{A:{value:e,configurable:!0,writable:!0,enumerable:!1}})}function oe(t){return vt(t,1),t}function Ln(t,e){q(e,(t|0)&-51)}function Nt(t,e){q(e,(t|18)&-41)}var se={};function Dt(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)&&t.constructor===Object}var Ft,He=[];q(He,23),Ft=Object.freeze(He);function ue(t){if(B(t.o)&2)throw Error("Cannot mutate an immutable Message")}function le(t){var e=t.length;(e=e?t[e-1]:void 0)&&Dt(e)?e.g=1:(e={},t.push((e.g=1,e)))}function Ge(t){var e=t.i+t.G;return t.B||(t.B=t.o[e]={})}function Q(t,e){return e===-1?null:e>=t.i?t.B?t.B[e]:void 0:t.o[e+t.G]}function tt(t,e,n,r){ue(t),Pt(t,e,n,r)}function Pt(t,e,n,r){t.j&&(t.j=void 0),e>=t.i||r?Ge(t)[e]=n:(t.o[e+t.G]=n,(t=t.B)&&e in t&&delete t[e])}function ae(t,e,n,r){var i=Q(t,e);Array.isArray(i)||(i=Ft);var s=B(i);if(s&1||oe(i),r)s&2||vt(i,2),n&1||Object.freeze(i);else{r=!(n&2);var o=s&2;n&1||!o?r&&s&16&&!o&&ze(i,16):(i=oe(Array.prototype.slice.call(i)),Pt(t,e,i))}return i}function he(t,e){var n=Q(t,e),r=n==null?n:typeof n=="number"||n==="NaN"||n==="Infinity"||n==="-Infinity"?Number(n):void 0;return r!=null&&r!==n&&Pt(t,e,r),r}function We(t,e,n,r,i){t.h||(t.h={});var s=t.h[n],o=ae(t,n,3,i);if(!s){var u=o;s=[];var l=!!(B(t.o)&16);o=!!(B(u)&2);var f=u;!i&&o&&(u=Array.prototype.slice.call(u));for(var v=o,j=0;j<u.length;j++){var m=u[j],y=e,E=!1;if(E=E===void 0?!1:E,m=Array.isArray(m)?new y(m):E?new y:void 0,m!==void 0){y=m.o;var C=E=B(y);o&&(C|=2),l&&(C|=16),C!=E&&q(y,C),y=C,v=v||!!(2&y),s.push(m)}}return t.h[n]=s,l=B(u),e=l|33,e=v?e&-9:e|8,l!=e&&(v=u,Object.isFrozen(v)&&(v=Array.prototype.slice.call(v)),q(v,e),u=v),f!==u&&Pt(t,n,u),(i||r&&o)&&vt(s,2),r&&Object.freeze(s),s}return i||(i=Object.isFrozen(s),r&&!i?Object.freeze(s):!r&&i&&(s=Array.prototype.slice.call(s),t.h[n]=s)),s}function zt(t,e,n){var r=!!(B(t.o)&2);if(e=We(t,e,n,r,r),t=ae(t,n,3,r),!(r||B(t)&8)){for(r=0;r<e.length;r++){if(n=e[r],B(n.o)&2){var i=Ze(n,!1);i.j=n}else i=n;n!==i&&(e[r]=i,t[r]=i.o)}vt(t,8)}return e}function et(t,e,n){if(n!=null&&typeof n!="number")throw Error("Value of float/double field must be a number|null|undefined, found "+typeof n+": "+n);tt(t,e,n)}function Ve(t,e,n,r,i){ue(t);var s=We(t,n,e,!1,!1);return n=r??new n,t=ae(t,e,2,!1),i!=null?(s.splice(i,0,n),t.splice(i,0,n.o)):(s.push(n),t.push(n.o)),n.C()&&ze(t,8),n}function Ht(t,e){return t??e}function nt(t,e,n){return n=n===void 0?0:n,Ht(he(t,e),n)}var Gt;function Rn(t){switch(typeof t){case"number":return isFinite(t)?t:String(t);case"object":if(t)if(Array.isArray(t)){if((B(t)&128)!==0)return t=Array.prototype.slice.call(t),le(t),t}else{if(Z&&t!=null&&t instanceof Uint8Array)return mt(t);if(t instanceof Ot){var e=t.V;return e==null?"":typeof e=="string"?e:t.V=mt(e)}}}return t}function Xe(t,e,n,r){if(t!=null){if(Array.isArray(t))t=ce(t,e,n,r!==void 0);else if(Dt(t)){var i={},s;for(s in t)i[s]=Xe(t[s],e,n,r);t=i}else t=e(t,r);return t}}function ce(t,e,n,r){var i=B(t);r=r?!!(i&16):void 0,t=Array.prototype.slice.call(t);for(var s=0;s<t.length;s++)t[s]=Xe(t[s],e,n,r);return n(i,t),t}function Bn(t){return t.ja===se?t.toJSON():Rn(t)}function Un(t,e){t&128&&le(e)}function Ye(t,e,n){if(n=n===void 0?Nt:n,t!=null){if(Z&&t instanceof Uint8Array)return t.length?new Ot(new Uint8Array(t),Tt):ee();if(Array.isArray(t)){var r=B(t);return r&2?t:e&&!(r&32)&&(r&16||r===0)?(q(t,r|2),t):(t=ce(t,Ye,r&4?Nt:n,!0),e=B(t),e&4&&e&2&&Object.freeze(t),t)}return t.ja===se?$e(t):t}}function Ke(t,e,n,r,i,s,o){if(t=t.h&&t.h[n]){if(r=B(t),r&2?r=t:(s=A(t,$e),Nt(r,s),Object.freeze(s),r=s),ue(e),o=r==null?Ft:oe([]),r!=null){for(s=!!r.length,t=0;t<r.length;t++){var u=r[t];s=s&&!(B(u.o)&2),o[t]=u.o}s=(s?8:0)|1,t=B(o),(t&s)!==s&&(Object.isFrozen(o)&&(o=Array.prototype.slice.call(o)),q(o,t|s)),e.h||(e.h={}),e.h[n]=r}else e.h&&(e.h[n]=void 0);Pt(e,n,o,i)}else tt(e,n,Ye(r,s,o),i)}function $e(t){return B(t.o)&2||(t=Ze(t,!0),vt(t.o,2)),t}function Ze(t,e){var n=t.o,r=[];vt(r,16);var i=t.constructor.h;if(i&&r.push(i),i=t.B,i){r.length=n.length,r.fill(void 0,r.length,n.length);var s={};r[r.length-1]=s}(B(n)&128)!==0&&le(r),e=e||t.C()?Nt:Ln,s=t.constructor,Gt=r,r=new s(r),Gt=void 0,t.R&&(r.R=t.R.slice()),s=!!(B(n)&16);for(var o=i?n.length-1:n.length,u=0;u<o;u++)Ke(t,r,u-t.G,n[u],!1,s,e);if(i)for(var l in i)Ke(t,r,+l,i[l],!0,s,e);return r}function V(t,e,n){t==null&&(t=Gt),Gt=void 0;var r=this.constructor.i||0,i=0<r,s=this.constructor.h,o=!1;if(t==null){t=s?[s]:[];var u=48,l=!0;i&&(r=0,u|=128),q(t,u)}else{if(!Array.isArray(t)||s&&s!==t[0])throw Error();var f=u=vt(t,0);if((l=(16&f)!==0)&&((o=(32&f)!==0)||(f|=32)),i){if(128&f)r=0;else if(0<t.length){var v=t[t.length-1];if(Dt(v)&&"g"in v){r=0,f|=128,delete v.g;var j=!0,m;for(m in v){j=!1;break}j&&t.pop()}}}else if(128&f)throw Error();u!==f&&q(t,f)}this.G=(s?0:-1)-r,this.h=void 0,this.o=t;t:{if(s=this.o.length,r=s-1,s&&(s=this.o[r],Dt(s))){this.B=s,this.i=r-this.G;break t}e!==void 0&&-1<e?(this.i=Math.max(e,r+1-this.G),this.B=void 0):this.i=Number.MAX_VALUE}if(!i&&this.B&&"g"in this.B)throw Error('Unexpected "g" flag in sparse object of message that is not a group type.');if(n){e=l&&!o&&!0,i=this.i;var y;for(l=0;l<n.length;l++)o=n[l],o<i?(o+=this.G,(r=t[o])?Qe(r,e):t[o]=Ft):(y||(y=Ge(this)),(r=y[o])?Qe(r,e):y[o]=Ft)}}V.prototype.toJSON=function(){return ce(this.o,Bn,Un)},V.prototype.C=function(){return!!(B(this.o)&2)};function Qe(t,e){if(Array.isArray(t)){var n=B(t),r=1;!e||n&2||(r|=16),(n&r)!==r&&q(t,n|r)}}V.prototype.ja=se,V.prototype.toString=function(){return this.o.toString()};function Je(t,e,n){if(n){var r={},i;for(i in n){var s=n[i],o=s.qa;o||(r.J=s.wa||s.oa.W,s.ia?(r.aa=rn(s.ia),o=(function(u){return function(l,f,v){return u.J(l,f,v,u.aa)}})(r)):s.ka?(r.Z=on(s.da.P,s.ka),o=(function(u){return function(l,f,v){return u.J(l,f,v,u.Z)}})(r)):o=r.J,s.qa=o),o(e,t,s.da),r={J:r.J,aa:r.aa,Z:r.Z}}}kn(e,t)}var Wt=Symbol();function qe(t,e,n){return t[Wt]||(t[Wt]=function(r,i){return e(r,i,n)})}function tn(t){var e=t[Wt];if(!e){var n=de(t);e=function(r,i){return sn(r,i,n)},t[Wt]=e}return e}function In(t){var e=t.ia;if(e)return tn(e);if(e=t.va)return qe(t.da.P,e,t.ka)}function Nn(t){var e=In(t),n=t.da,r=t.oa.U;return e?function(i,s){return r(i,s,n,e)}:function(i,s){return r(i,s,n)}}function en(t,e){var n=t[e];return typeof n=="function"&&n.length===0&&(n=n(),t[e]=n),Array.isArray(n)&&(kt in n||_t in n||0<n.length&&typeof n[0]=="function")?n:void 0}function nn(t,e,n,r,i,s){e.P=t[0];var o=1;if(t.length>o&&typeof t[o]!="number"){var u=t[o++];n(e,u)}for(;o<t.length;){n=t[o++];for(var l=o+1;l<t.length&&typeof t[l]!="number";)l++;switch(u=t[o++],l-=o,l){case 0:r(e,n,u);break;case 1:(l=en(t,o))?(o++,i(e,n,u,l)):r(e,n,u,t[o++]);break;case 2:l=o++,l=en(t,l),i(e,n,u,l,t[o++]);break;case 3:s(e,n,u,t[o++],t[o++],t[o++]);break;case 4:s(e,n,u,t[o++],t[o++],t[o++],t[o++]);break;default:throw Error("unexpected number of binary field arguments: "+l)}}return e}var Vt=Symbol();function rn(t){var e=t[Vt];if(!e){var n=fe(t);e=function(r,i){return un(r,i,n)},t[Vt]=e}return e}function on(t,e){var n=t[Vt];return n||(n=function(r,i){return Je(r,i,e)},t[Vt]=n),n}var _t=Symbol();function Dn(t,e){t.push(e)}function zn(t,e,n){t.push(e,n.W)}function Hn(t,e,n,r){var i=rn(r),s=fe(r).P,o=n.W;t.push(e,function(u,l,f){return o(u,l,f,s,i)})}function Gn(t,e,n,r,i,s){var o=on(r,s),u=n.W;t.push(e,function(l,f,v){return u(l,f,v,r,o)})}function fe(t){var e=t[_t];return e||(e=nn(t,t[_t]=[],Dn,zn,Hn,Gn),kt in t&&_t in t&&(t.length=0),e)}var kt=Symbol();function Wn(t,e){t[0]=e}function Vn(t,e,n,r){var i=n.U;t[e]=r?function(s,o,u){return i(s,o,u,r)}:i}function Xn(t,e,n,r,i){var s=n.U,o=tn(r),u=de(r).P;t[e]=function(l,f,v){return s(l,f,v,u,o,i)}}function Yn(t,e,n,r,i,s,o){var u=n.U,l=qe(r,i,s);t[e]=function(f,v,j){return u(f,v,j,r,l,o)}}function de(t){var e=t[kt];return e||(e=nn(t,t[kt]={},Wn,Vn,Xn,Yn),kt in t&&_t in t&&(t.length=0),e)}function sn(t,e,n){for(;De(e)&&e.i!=4;){var r=e.l,i=n[r];if(!i){var s=n[0];s&&(s=s[r])&&(i=n[r]=Nn(s))}if(!i||!i(e,t,r)){i=e,r=t,s=i.j,Ut(i);var o=i;if(!o.ca){if(i=o.h.h-s,o.h.h=s,o=o.h,i==0)i=ee();else{if(s=Ue(o,i),o.S&&o.m)i=o.i.subarray(s,s+i);else{o=o.i;var u=s;i=s+i,i=u===i?Jt():Tn?o.slice(u,i):new Uint8Array(o.subarray(u,i))}i=i.length==0?ee():new Ot(i,Tt)}(s=r.R)?s.push(i):r.R=[i]}}}return t}function un(t,e,n){for(var r=n.length,i=r%2==1,s=i?1:0;s<r;s+=2)(0,n[s+1])(e,t,n[s]);Je(t,e,i?n[0]:void 0)}function Lt(t,e){return{U:t,W:e}}var J=Lt(function(t,e,n){if(t.i!==5)return!1;t=t.h;var r=t.i,i=t.h,s=r[i],o=r[i+1],u=r[i+2];return r=r[i+3],dt(t,t.h+4),o=(s<<0|o<<8|u<<16|r<<24)>>>0,t=2*(o>>31)+1,s=o>>>23&255,o&=8388607,tt(e,n,s==255?o?NaN:1/0*t:s==0?t*Math.pow(2,-149)*o:t*Math.pow(2,s-150)*(o+Math.pow(2,23))),!0},function(t,e,n){if(e=he(e,n),e!=null){pt(t.h,8*n+5),t=t.h;var r=+e;r===0?0<1/r?I=W=0:(W=0,I=2147483648):isNaN(r)?(W=0,I=2147483647):(r=(n=0>r?-2147483648:0)?-r:r,34028234663852886e22<r?(W=0,I=(n|2139095040)>>>0):11754943508222875e-54>r?(r=Math.round(r/Math.pow(2,-149)),W=0,I=(n|r)>>>0):(e=Math.floor(Math.log(r)/Math.LN2),r*=Math.pow(2,-e),r=Math.round(8388608*r),16777216<=r&&++e,W=0,I=(n|e+127<<23|r&8388607)>>>0)),n=I,t.h.push(n>>>0&255),t.h.push(n>>>8&255),t.h.push(n>>>16&255),t.h.push(n>>>24&255)}}),Kn=Lt(function(t,e,n){if(t.i!==0)return!1;var r=t.h,i=0,s=t=0,o=r.i,u=r.h;do{var l=o[u++];i|=(l&127)<<s,s+=7}while(32>s&&l&128);for(32<s&&(t|=(l&127)>>4),s=3;32>s&&l&128;s+=7)l=o[u++],t|=(l&127)<<s;if(dt(r,u),128>l)r=i>>>0,l=t>>>0,(t=l&2147483648)&&(r=~r+1>>>0,l=~l>>>0,r==0&&(l=l+1>>>0)),r=4294967296*l+(r>>>0);else throw qt();return tt(e,n,t?-r:r),!0},function(t,e,n){e=Q(e,n),e!=null&&(typeof e=="string"&&Te(e),e!=null&&(pt(t.h,8*n),typeof e=="number"?(t=t.h,Ee(e),Ne(t,I,W)):(n=Te(e),Ne(t.h,n.i,n.h))))}),$n=Lt(function(t,e,n){return t.i!==0?!1:(tt(e,n,Mt(t.h)),!0)},function(t,e,n){if(e=Q(e,n),e!=null&&e!=null)if(pt(t.h,8*n),t=t.h,n=e,0<=n)pt(t,n);else{for(e=0;9>e;e++)t.h.push(n&127|128),n>>=7;t.h.push(1)}}),ln=Lt(function(t,e,n){if(t.i!==2)return!1;var r=Mt(t.h)>>>0;t=t.h;var i=Ue(t,r);if(t=t.i,Mn){var s=t,o;(o=te)||(o=te=new TextDecoder("utf-8",{fatal:!0})),t=i+r,s=i===0&&t===s.length?s:s.subarray(i,t);try{var u=o.decode(s)}catch(j){if(Bt===void 0){try{o.decode(new Uint8Array([128]))}catch{}try{o.decode(new Uint8Array([97])),Bt=!0}catch{Bt=!1}}throw!Bt&&(te=void 0),j}}else{u=i,r=u+r,i=[];for(var l=null,f,v;u<r;)f=t[u++],128>f?i.push(f):224>f?u>=r?ft():(v=t[u++],194>f||(v&192)!==128?(u--,ft()):i.push((f&31)<<6|v&63)):240>f?u>=r-1?ft():(v=t[u++],(v&192)!==128||f===224&&160>v||f===237&&160<=v||((s=t[u++])&192)!==128?(u--,ft()):i.push((f&15)<<12|(v&63)<<6|s&63)):244>=f?u>=r-2?ft():(v=t[u++],(v&192)!==128||(f<<28)+(v-144)>>30!==0||((s=t[u++])&192)!==128||((o=t[u++])&192)!==128?(u--,ft()):(f=(f&7)<<18|(v&63)<<12|(s&63)<<6|o&63,f-=65536,i.push((f>>10&1023)+55296,(f&1023)+56320))):ft(),8192<=i.length&&(l=Pe(l,i),i.length=0);u=Pe(l,i)}return tt(e,n,u),!0},function(t,e,n){if(e=Q(e,n),e!=null){var r=!1;if(r=r===void 0?!1:r,Fn){if(r&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(e))throw Error("Found an unpaired surrogate");e=(_e||(_e=new TextEncoder)).encode(e)}else{for(var i=0,s=new Uint8Array(3*e.length),o=0;o<e.length;o++){var u=e.charCodeAt(o);if(128>u)s[i++]=u;else{if(2048>u)s[i++]=u>>6|192;else{if(55296<=u&&57343>=u){if(56319>=u&&o<e.length){var l=e.charCodeAt(++o);if(56320<=l&&57343>=l){u=1024*(u-55296)+l-56320+65536,s[i++]=u>>18|240,s[i++]=u>>12&63|128,s[i++]=u>>6&63|128,s[i++]=u&63|128;continue}else o--}if(r)throw Error("Found an unpaired surrogate");u=65533}s[i++]=u>>12|224,s[i++]=u>>6&63|128}s[i++]=u&63|128}}e=i===s.length?s:s.subarray(0,i)}pt(t.h,8*n+2),pt(t.h,e.length),gt(t,t.h.end()),gt(t,e)}}),an=Lt(function(t,e,n,r,i){if(t.i!==2)return!1;e=Ve(e,n,r),n=t.h.j,r=Mt(t.h)>>>0;var s=t.h.h+r,o=s-n;if(0>=o&&(t.h.j=s,i(e,t,void 0,void 0,void 0),o=s-t.h.h),o)throw Error("Message parsing ended unexpectedly. Expected to read "+(r+" bytes, instead read "+(r-o)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return t.h.h=s,t.h.j=n,!0},function(t,e,n,r,i){if(e=zt(e,r,n),e!=null)for(r=0;r<e.length;r++){var s=t;pt(s.h,8*n+2);var o=s.h.end();gt(s,o),o.push(s.i),s=o,i(e[r],t),o=t;var u=s.pop();for(u=o.i+o.h.length()-u;127<u;)s.push(u&127|128),u>>>=7,o.i++;s.push(u),o.i++}});function pe(t){return function(e,n){t:{if(It.length){var r=It.pop();r.setOptions(n),ne(r.h,e,n),e=r}else e=new ie(e,n);try{var i=de(t),s=sn(new i.P,e,i);break t}finally{i=e.h,i.i=null,i.m=!1,i.l=0,i.j=0,i.h=0,i.S=!1,e.l=-1,e.i=-1,100>It.length&&It.push(e)}s=void 0}return s}}function ve(t){return function(){var e=new _n;un(this,e,fe(t)),gt(e,e.h.end());for(var n=new Uint8Array(e.i),r=e.j,i=r.length,s=0,o=0;o<i;o++){var u=r[o];n.set(u,s),s+=u.length}return e.j=[n],n}}function wt(t){V.call(this,t)}ct(wt,V);var hn=[wt,1,$n,2,J,3,ln,4,ln];wt.prototype.l=ve(hn);function ye(t){V.call(this,t,-1,Zn)}ct(ye,V),ye.prototype.addClassification=function(t,e){return Ve(this,1,wt,t,e),this};var Zn=[1],cn=pe([ye,1,an,hn]);function xt(t){V.call(this,t)}ct(xt,V);var fn=[xt,1,J,2,J,3,J,4,J,5,J];xt.prototype.l=ve(fn);function dn(t){V.call(this,t,-1,Qn)}ct(dn,V);var Qn=[1],pn=pe([dn,1,an,fn]);function Xt(t){V.call(this,t)}ct(Xt,V);var vn=[Xt,1,J,2,J,3,J,4,J,5,J,6,Kn],Jn=pe(vn);Xt.prototype.l=ve(vn);function yn(t,e,n){if(n=t.createShader(n===0?t.VERTEX_SHADER:t.FRAGMENT_SHADER),t.shaderSource(n,e),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+t.getShaderInfoLog(n));return n}function mn(t){return zt(t,wt,1).map(function(e){var n=Q(e,1);return{index:n??0,score:nt(e,2),label:Q(e,3)!=null?Ht(Q(e,3),""):void 0,displayName:Q(e,4)!=null?Ht(Q(e,4),""):void 0}})}function gn(t){return{x:nt(t,1),y:nt(t,2),z:nt(t,3),visibility:he(t,4)!=null?nt(t,4):void 0}}function wn(t){return t.map(function(e){return zt(pn(e),xt,1).map(gn)})}function me(t,e){this.i=t,this.h=e,this.m=0}function xn(t,e,n){return qn(t,e),typeof t.h.canvas.transferToImageBitmap=="function"?Promise.resolve(t.h.canvas.transferToImageBitmap()):n?Promise.resolve(t.h.canvas):typeof createImageBitmap=="function"?createImageBitmap(t.h.canvas):(t.j===void 0&&(t.j=document.createElement("canvas")),new Promise(function(r){t.j.height=t.h.canvas.height,t.j.width=t.h.canvas.width,t.j.getContext("2d",{}).drawImage(t.h.canvas,0,0,t.h.canvas.width,t.h.canvas.height),r(t.j)}))}function qn(t,e){var n=t.h;if(t.s===void 0){var r=yn(n,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),i=yn(n,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),s=n.createProgram();if(n.attachShader(s,r),n.attachShader(s,i),n.linkProgram(s),!n.getProgramParameter(s,n.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+n.getProgramInfoLog(s));r=t.s=s,n.useProgram(r),i=n.getUniformLocation(r,"sampler0"),t.l={O:n.getAttribLocation(r,"aVertex"),N:n.getAttribLocation(r,"aTex"),xa:i},t.v=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,t.v),n.enableVertexAttribArray(t.l.O),n.vertexAttribPointer(t.l.O,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),t.u=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,t.u),n.enableVertexAttribArray(t.l.N),n.vertexAttribPointer(t.l.N,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),n.uniform1i(i,0)}r=t.l,n.useProgram(t.s),n.canvas.width=e.width,n.canvas.height=e.height,n.viewport(0,0,e.width,e.height),n.activeTexture(n.TEXTURE0),t.i.bindTexture2d(e.glName),n.enableVertexAttribArray(r.O),n.bindBuffer(n.ARRAY_BUFFER,t.v),n.vertexAttribPointer(r.O,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(r.N),n.bindBuffer(n.ARRAY_BUFFER,t.u),n.vertexAttribPointer(r.N,2,n.FLOAT,!1,0,0),n.bindFramebuffer(n.DRAW_FRAMEBUFFER?n.DRAW_FRAMEBUFFER:n.FRAMEBUFFER,null),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.colorMask(!0,!0,!0,!0),n.drawArrays(n.TRIANGLE_FAN,0,4),n.disableVertexAttribArray(r.O),n.disableVertexAttribArray(r.N),n.bindBuffer(n.ARRAY_BUFFER,null),t.i.bindTexture2d(0)}function tr(t){this.h=t}var er=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function nr(t,e){return e+t}function bn(t,e){window[t]=e}function rr(t){var e=document.createElement("script");return e.setAttribute("src",t),e.setAttribute("crossorigin","anonymous"),new Promise(function(n){e.addEventListener("load",function(){n()},!1),e.addEventListener("error",function(){n()},!1),document.body.appendChild(e)})}function ir(){return c(function(t){switch(t.h){case 1:return t.s=2,R(t,WebAssembly.instantiate(er),4);case 4:t.h=3,t.s=0;break;case 2:return t.s=0,t.l=null,t.return(!1);case 3:return t.return(!0)}})}function ge(t){if(this.h=t,this.listeners={},this.l={},this.L={},this.s={},this.v={},this.M=this.u=this.ga=!0,this.I=Promise.resolve(),this.fa="",this.D={},this.locateFile=t&&t.locateFile||nr,typeof window=="object")var e=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")e=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.ha=e,t.options){e=_(Object.keys(t.options));for(var n=e.next();!n.done;n=e.next()){n=n.value;var r=t.options[n].default;r!==void 0&&(this.l[n]=typeof r=="function"?r():r)}}}M=ge.prototype,M.close=function(){return this.j&&this.j.delete(),Promise.resolve()};function or(t){var e,n,r,i,s,o,u,l,f,v,j;return c(function(m){switch(m.h){case 1:return t.ga?(e=t.h.files===void 0?[]:typeof t.h.files=="function"?t.h.files(t.l):t.h.files,R(m,ir(),2)):m.return();case 2:if(n=m.i,typeof window=="object")return bn("createMediapipeSolutionsWasm",{locateFile:t.locateFile}),bn("createMediapipeSolutionsPackedAssets",{locateFile:t.locateFile}),o=e.filter(function(y){return y.data!==void 0}),u=e.filter(function(y){return y.data===void 0}),l=Promise.all(o.map(function(y){var E=Yt(t,y.url);if(y.path!==void 0){var C=y.path;E=E.then(function(L){return t.overrideFile(C,L),Promise.resolve(L)})}return E})),f=Promise.all(u.map(function(y){return y.simd===void 0||y.simd&&n||!y.simd&&!n?rr(t.locateFile(y.url,t.ha)):Promise.resolve()})).then(function(){var y,E,C;return c(function(L){if(L.h==1)return y=window.createMediapipeSolutionsWasm,E=window.createMediapipeSolutionsPackedAssets,C=t,R(L,y(E),2);C.i=L.i,L.h=0})}),v=(function(){return c(function(y){return t.h.graph&&t.h.graph.url?y=R(y,Yt(t,t.h.graph.url),0):(y.h=0,y=void 0),y})})(),R(m,Promise.all([f,l,v]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return r=e.filter(function(y){return y.simd===void 0||y.simd&&n||!y.simd&&!n}).map(function(y){return t.locateFile(y.url,t.ha)}),importScripts.apply(null,G(r)),i=t,R(m,createMediapipeSolutionsWasm(Module),6);case 6:i.i=m.i,t.m=new OffscreenCanvas(1,1),t.i.canvas=t.m,s=t.i.GL.createContext(t.m,{antialias:!1,alpha:!1,ua:typeof WebGL2RenderingContext<"u"?2:1}),t.i.GL.makeContextCurrent(s),m.h=4;break;case 7:if(t.m=document.createElement("canvas"),j=t.m.getContext("webgl2",{}),!j&&(j=t.m.getContext("webgl",{}),!j))return alert("Failed to create WebGL canvas context when passing video frame."),m.return();t.K=j,t.i.canvas=t.m,t.i.createContext(t.m,!0,!0,{});case 4:t.j=new t.i.SolutionWasm,t.ga=!1,m.h=0}})}function sr(t){var e,n,r,i,s,o,u,l;return c(function(f){if(f.h==1){if(t.h.graph&&t.h.graph.url&&t.fa===t.h.graph.url)return f.return();if(t.u=!0,!t.h.graph||!t.h.graph.url){f.h=2;return}return t.fa=t.h.graph.url,R(f,Yt(t,t.h.graph.url),3)}for(f.h!=2&&(e=f.i,t.j.loadGraph(e)),n=_(Object.keys(t.D)),r=n.next();!r.done;r=n.next())i=r.value,t.j.overrideFile(i,t.D[i]);if(t.D={},t.h.listeners)for(s=_(t.h.listeners),o=s.next();!o.done;o=s.next())u=o.value,hr(t,u);l=t.l,t.l={},t.setOptions(l),f.h=0})}M.reset=function(){var t=this;return c(function(e){t.j&&(t.j.reset(),t.s={},t.v={}),e.h=0})},M.setOptions=function(t,e){var n=this;if(e=e||this.h.options){for(var r=[],i=[],s={},o=_(Object.keys(t)),u=o.next();!u.done;s={X:s.X,Y:s.Y},u=o.next())if(u=u.value,!(u in this.l&&this.l[u]===t[u])){this.l[u]=t[u];var l=e[u];l!==void 0&&(l.onChange&&(s.X=l.onChange,s.Y=t[u],r.push((function(f){return function(){var v;return c(function(j){if(j.h==1)return R(j,f.X(f.Y),2);v=j.i,v===!0&&(n.u=!0),j.h=0})}})(s))),l.graphOptionXref&&(u=Object.assign({},{calculatorName:"",calculatorIndex:0},l.graphOptionXref,{valueNumber:l.type===1?t[u]:0,valueBoolean:l.type===0?t[u]:!1,valueString:l.type===2?t[u]:""}),i.push(u)))}(r.length!==0||i.length!==0)&&(this.u=!0,this.H=(this.H===void 0?[]:this.H).concat(i),this.F=(this.F===void 0?[]:this.F).concat(r))}};function ur(t){var e,n,r,i,s,o,u;return c(function(l){switch(l.h){case 1:if(!t.u)return l.return();if(!t.F){l.h=2;break}e=_(t.F),n=e.next();case 3:if(n.done){l.h=5;break}return r=n.value,R(l,r(),4);case 4:n=e.next(),l.h=3;break;case 5:t.F=void 0;case 2:if(t.H){for(i=new t.i.GraphOptionChangeRequestList,s=_(t.H),o=s.next();!o.done;o=s.next())u=o.value,i.push_back(u);t.j.changeOptions(i),i.delete(),t.H=void 0}t.u=!1,l.h=0}})}M.initialize=function(){var t=this;return c(function(e){return e.h==1?R(e,or(t),2):e.h!=3?R(e,sr(t),3):R(e,ur(t),0)})};function Yt(t,e){var n,r;return c(function(i){return e in t.L?i.return(t.L[e]):(n=t.locateFile(e,""),r=fetch(n).then(function(s){return s.arrayBuffer()}),t.L[e]=r,i.return(r))})}M.overrideFile=function(t,e){this.j?this.j.overrideFile(t,e):this.D[t]=e},M.clearOverriddenFiles=function(){this.D={},this.j&&this.j.clearOverriddenFiles()},M.send=function(t,e){var n=this,r,i,s,o,u,l,f,v,j;return c(function(m){switch(m.h){case 1:return n.h.inputs?(r=1e3*(e??performance.now()),R(m,n.I,2)):m.return();case 2:return R(m,n.initialize(),3);case 3:for(i=new n.i.PacketDataList,s=_(Object.keys(t)),o=s.next();!o.done;o=s.next())if(u=o.value,l=n.h.inputs[u]){t:{var y=t[u];switch(l.type){case"video":var E=n.s[l.stream];if(E||(E=new me(n.i,n.K),n.s[l.stream]=E),E.m===0&&(E.m=E.i.createTexture()),typeof HTMLVideoElement<"u"&&y instanceof HTMLVideoElement)var C=y.videoWidth,L=y.videoHeight;else typeof HTMLImageElement<"u"&&y instanceof HTMLImageElement?(C=y.naturalWidth,L=y.naturalHeight):(C=y.width,L=y.height);L={glName:E.m,width:C,height:L},C=E.h,C.canvas.width=L.width,C.canvas.height=L.height,C.activeTexture(C.TEXTURE0),E.i.bindTexture2d(E.m),C.texImage2D(C.TEXTURE_2D,0,C.RGBA,C.RGBA,C.UNSIGNED_BYTE,y),E.i.bindTexture2d(0),E=L;break t;case"detections":for(E=n.s[l.stream],E||(E=new tr(n.i),n.s[l.stream]=E),E.data||(E.data=new E.h.DetectionListData),E.data.reset(y.length),L=0;L<y.length;++L){C=y[L];var P=E.data,D=P.setBoundingBox,$=L,X=C.la,O=new Xt;if(et(O,1,X.ra),et(O,2,X.sa),et(O,3,X.height),et(O,4,X.width),et(O,5,X.rotation),tt(O,6,X.pa),X=O.l(),D.call(P,$,X),C.ea)for(P=0;P<C.ea.length;++P){O=C.ea[P],D=E.data,$=D.addNormalizedLandmark,X=L,O=Object.assign({},O,{visibility:O.visibility?O.visibility:0});var z=new xt;et(z,1,O.x),et(z,2,O.y),et(z,3,O.z),O.visibility&&et(z,4,O.visibility),O=z.l(),$.call(D,X,O)}if(C.ba)for(P=0;P<C.ba.length;++P)D=E.data,$=D.addClassification,X=L,O=C.ba[P],z=new wt,et(z,2,O.score),O.index&&tt(z,1,O.index),O.label&&tt(z,3,O.label),O.displayName&&tt(z,4,O.displayName),O=z.l(),$.call(D,X,O)}E=E.data;break t;default:E={}}}switch(f=E,v=l.stream,l.type){case"video":i.pushTexture2d(Object.assign({},f,{stream:v,timestamp:r}));break;case"detections":j=f,j.stream=v,j.timestamp=r,i.pushDetectionList(j);break;default:throw Error("Unknown input config type: '"+l.type+"'")}}return n.j.send(i),R(m,n.I,4);case 4:i.delete(),m.h=0}})};function lr(t,e,n){var r,i,s,o,u,l,f,v,j,m,y,E,C,L;return c(function(P){switch(P.h){case 1:if(!n)return P.return(e);for(r={},i=0,s=_(Object.keys(n)),o=s.next();!o.done;o=s.next())u=o.value,l=n[u],typeof l!="string"&&l.type==="texture"&&e[l.stream]!==void 0&&++i;1<i&&(t.M=!1),f=_(Object.keys(n)),o=f.next();case 2:if(o.done){P.h=4;break}if(v=o.value,j=n[v],typeof j=="string")return C=r,L=v,R(P,ar(t,v,e[j]),14);if(m=e[j.stream],j.type==="detection_list"){if(m){for(var D=m.getRectList(),$=m.getLandmarksList(),X=m.getClassificationsList(),O=[],z=0;z<D.size();++z){var ut=Jn(D.get(z)),cr=nt(ut,1),fr=nt(ut,2),dr=nt(ut,3),pr=nt(ut,4),vr=nt(ut,5,0),Kt=void 0;Kt=Kt===void 0?0:Kt,ut={la:{ra:cr,sa:fr,height:dr,width:pr,rotation:vr,pa:Ht(Q(ut,6),Kt)},ea:zt(pn($.get(z)),xt,1).map(gn),ba:mn(cn(X.get(z)))},O.push(ut)}D=O}else D=[];r[v]=D,P.h=7;break}if(j.type==="proto_list"){if(m){for(D=Array(m.size()),$=0;$<m.size();$++)D[$]=m.get($);m.delete()}else D=[];r[v]=D,P.h=7;break}if(m===void 0){P.h=3;break}if(j.type==="float_list"){r[v]=m,P.h=7;break}if(j.type==="proto"){r[v]=m,P.h=7;break}if(j.type!=="texture")throw Error("Unknown output config type: '"+j.type+"'");return y=t.v[v],y||(y=new me(t.i,t.K),t.v[v]=y),R(P,xn(y,m,t.M),13);case 13:E=P.i,r[v]=E;case 7:j.transform&&r[v]&&(r[v]=j.transform(r[v])),P.h=3;break;case 14:C[L]=P.i;case 3:o=f.next(),P.h=2;break;case 4:return P.return(r)}})}function ar(t,e,n){var r;return c(function(i){return typeof n=="number"||n instanceof Uint8Array||n instanceof t.i.Uint8BlobList?i.return(n):n instanceof t.i.Texture2dDataOut?(r=t.v[e],r||(r=new me(t.i,t.K),t.v[e]=r),i.return(xn(r,n,t.M))):i.return(void 0)})}function hr(t,e){for(var n=e.name||"$",r=[].concat(G(e.wants)),i=new t.i.StringList,s=_(e.wants),o=s.next();!o.done;o=s.next())i.push_back(o.value);s=t.i.PacketListener.implement({onResults:function(u){for(var l={},f=0;f<e.wants.length;++f)l[r[f]]=u.get(f);var v=t.listeners[n];v&&(t.I=lr(t,l,e.outs).then(function(j){j=v(j);for(var m=0;m<e.wants.length;++m){var y=l[r[m]];typeof y=="object"&&y.hasOwnProperty&&y.hasOwnProperty("delete")&&y.delete()}j&&(t.I=j)}))}}),t.j.attachMultiListener(i,s),i.delete()}M.onResults=function(t,e){this.listeners[e||"$"]=t},U("Solution",ge),U("OptionType",{BOOL:0,NUMBER:1,ta:2,0:"BOOL",1:"NUMBER",2:"STRING"});function An(t){return t===void 0&&(t=0),t===1?"hand_landmark_full.tflite":"hand_landmark_lite.tflite"}function jn(t){var e=this;t=t||{},this.h=new ge({locateFile:t.locateFile,files:function(n){return[{url:"hands_solution_packed_assets_loader.js"},{simd:!1,url:"hands_solution_wasm_bin.js"},{simd:!0,url:"hands_solution_simd_wasm_bin.js"},{data:!0,url:An(n.modelComplexity)}]},graph:{url:"hands.binarypb"},inputs:{image:{type:"video",stream:"input_frames_gpu"}},listeners:[{wants:["multi_hand_landmarks","multi_hand_world_landmarks","image_transformed","multi_handedness"],outs:{image:"image_transformed",multiHandLandmarks:{type:"proto_list",stream:"multi_hand_landmarks",transform:wn},multiHandWorldLandmarks:{type:"proto_list",stream:"multi_hand_world_landmarks",transform:wn},multiHandedness:{type:"proto_list",stream:"multi_handedness",transform:function(n){return n.map(function(r){return mn(cn(r))[0]})}}}}],options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumHands:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculator",fieldName:"int_value"}},modelComplexity:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(n){var r,i,s;return c(function(o){return o.h==1?(r=An(n),i="third_party/mediapipe/modules/hand_landmark/"+r,R(o,Yt(e.h,r),2)):(s=o.i,e.h.overrideFile(i,s),o.return(!0))})}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"handlandmarktrackinggpu__palmdetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"handlandmarktrackinggpu__handlandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}}}})}M=jn.prototype,M.close=function(){return this.h.close(),Promise.resolve()},M.onResults=function(t){this.h.onResults(t)},M.initialize=function(){var t=this;return c(function(e){return R(e,t.h.initialize(),0)})},M.reset=function(){this.h.reset()},M.send=function(t){var e=this;return c(function(n){return R(n,e.h.send(t),0)})},M.setOptions=function(t){this.h.setOptions(t)},U("Hands",jn),U("HAND_CONNECTIONS",[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]]),U("VERSION","0.4.1675469240")}).call(we)),we}var wr=gr(),xe={},Sn;function xr(){return Sn||(Sn=1,(function(){function M(a){var c=0;return function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}}}var h=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,c,S){return a==Array.prototype||a==Object.prototype||(a[c]=S.value),a};function d(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof $t=="object"&&$t];for(var c=0;c<a.length;++c){var S=a[c];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var x=d(this);function b(a,c){if(c)t:{var S=x;a=a.split(".");for(var w=0;w<a.length-1;w++){var F=a[w];if(!(F in S))break t;S=S[F]}a=a[a.length-1],w=S[a],c=c(w),c!=w&&c!=null&&h(S,a,{configurable:!0,writable:!0,value:c})}}b("Symbol",function(a){function c(U){if(this instanceof c)throw new TypeError("Symbol is not a constructor");return new S(w+(U||"")+"_"+F++,U)}function S(U,p){this.g=U,h(this,"description",{configurable:!0,writable:!0,value:p})}if(a)return a;S.prototype.toString=function(){return this.g};var w="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",F=0;return c}),b("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var c="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),S=0;S<c.length;S++){var w=x[c[S]];typeof w=="function"&&typeof w.prototype[a]!="function"&&h(w.prototype,a,{configurable:!0,writable:!0,value:function(){return g(M(this))}})}return a});function g(a){return a={next:a},a[Symbol.iterator]=function(){return this},a}function N(a){var c=typeof Symbol<"u"&&Symbol.iterator&&a[Symbol.iterator];return c?c.call(a):{next:M(a)}}function _(){this.i=!1,this.g=null,this.o=void 0,this.j=1,this.m=0,this.h=null}function G(a){if(a.i)throw new TypeError("Generator is already running");a.i=!0}_.prototype.l=function(a){this.o=a};function lt(a,c){a.h={F:c,G:!0},a.j=a.m}_.prototype.return=function(a){this.h={return:a},this.j=this.m};function Rt(a){this.g=new _,this.h=a}function bt(a,c){G(a.g);var S=a.g.g;return S?at(a,"return"in S?S.return:function(w){return{value:w,done:!0}},c,a.g.return):(a.g.return(c),ht(a))}function at(a,c,S,w){try{var F=c.call(a.g.g,S);if(!(F instanceof Object))throw new TypeError("Iterator result "+F+" is not an object");if(!F.done)return a.g.i=!1,F;var U=F.value}catch(p){return a.g.g=null,lt(a.g,p),ht(a)}return a.g.g=null,w.call(a.g,U),ht(a)}function ht(a){for(;a.g.j;)try{var c=a.h(a.g);if(c)return a.g.i=!1,{value:c.value,done:!1}}catch(S){a.g.o=void 0,lt(a.g,S)}if(a.g.i=!1,a.g.h){if(c=a.g.h,a.g.h=null,c.G)throw c.F;return{value:c.return,done:!0}}return{value:void 0,done:!0}}function At(a){this.next=function(c){return G(a.g),a.g.g?c=at(a,a.g.g.next,c,a.g.l):(a.g.l(c),c=ht(a)),c},this.throw=function(c){return G(a.g),a.g.g?c=at(a,a.g.g.throw,c,a.g.l):(lt(a.g,c),c=ht(a)),c},this.return=function(c){return bt(a,c)},this[Symbol.iterator]=function(){return this}}function jt(a){function c(w){return a.next(w)}function S(w){return a.throw(w)}return new Promise(function(w,F){function U(p){p.done?w(p.value):Promise.resolve(p.value).then(c,S).then(U,F)}U(a.next())})}b("Promise",function(a){function c(p){this.h=0,this.i=void 0,this.g=[],this.o=!1;var A=this.j();try{p(A.resolve,A.reject)}catch(T){A.reject(T)}}function S(){this.g=null}function w(p){return p instanceof c?p:new c(function(A){A(p)})}if(a)return a;S.prototype.h=function(p){if(this.g==null){this.g=[];var A=this;this.i(function(){A.l()})}this.g.push(p)};var F=x.setTimeout;S.prototype.i=function(p){F(p,0)},S.prototype.l=function(){for(;this.g&&this.g.length;){var p=this.g;this.g=[];for(var A=0;A<p.length;++A){var T=p[A];p[A]=null;try{T()}catch(k){this.j(k)}}}this.g=null},S.prototype.j=function(p){this.i(function(){throw p})},c.prototype.j=function(){function p(k){return function(Y){T||(T=!0,k.call(A,Y))}}var A=this,T=!1;return{resolve:p(this.A),reject:p(this.l)}},c.prototype.A=function(p){if(p===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(p instanceof c)this.C(p);else{t:switch(typeof p){case"object":var A=p!=null;break t;case"function":A=!0;break t;default:A=!1}A?this.v(p):this.m(p)}},c.prototype.v=function(p){var A=void 0;try{A=p.then}catch(T){this.l(T);return}typeof A=="function"?this.D(A,p):this.m(p)},c.prototype.l=function(p){this.u(2,p)},c.prototype.m=function(p){this.u(1,p)},c.prototype.u=function(p,A){if(this.h!=0)throw Error("Cannot settle("+p+", "+A+"): Promise already settled in state"+this.h);this.h=p,this.i=A,this.h===2&&this.B(),this.H()},c.prototype.B=function(){var p=this;F(function(){if(p.I()){var A=x.console;typeof A<"u"&&A.error(p.i)}},1)},c.prototype.I=function(){if(this.o)return!1;var p=x.CustomEvent,A=x.Event,T=x.dispatchEvent;return typeof T>"u"?!0:(typeof p=="function"?p=new p("unhandledrejection",{cancelable:!0}):typeof A=="function"?p=new A("unhandledrejection",{cancelable:!0}):(p=x.document.createEvent("CustomEvent"),p.initCustomEvent("unhandledrejection",!1,!0,p)),p.promise=this,p.reason=this.i,T(p))},c.prototype.H=function(){if(this.g!=null){for(var p=0;p<this.g.length;++p)U.h(this.g[p]);this.g=null}};var U=new S;return c.prototype.C=function(p){var A=this.j();p.s(A.resolve,A.reject)},c.prototype.D=function(p,A){var T=this.j();try{p.call(A,T.resolve,T.reject)}catch(k){T.reject(k)}},c.prototype.then=function(p,A){function T(K,Z){return typeof K=="function"?function(yt){try{k(K(yt))}catch(mt){Y(mt)}}:Z}var k,Y,Ct=new c(function(K,Z){k=K,Y=Z});return this.s(T(p,k),T(A,Y)),Ct},c.prototype.catch=function(p){return this.then(void 0,p)},c.prototype.s=function(p,A){function T(){switch(k.h){case 1:p(k.i);break;case 2:A(k.i);break;default:throw Error("Unexpected state: "+k.h)}}var k=this;this.g==null?U.h(T):this.g.push(T),this.o=!0},c.resolve=w,c.reject=function(p){return new c(function(A,T){T(p)})},c.race=function(p){return new c(function(A,T){for(var k=N(p),Y=k.next();!Y.done;Y=k.next())w(Y.value).s(A,T)})},c.all=function(p){var A=N(p),T=A.next();return T.done?w([]):new c(function(k,Y){function Ct(yt){return function(mt){K[yt]=mt,Z--,Z==0&&k(K)}}var K=[],Z=0;do K.push(void 0),Z++,w(T.value).s(Ct(K.length-1),Y),T=A.next();while(!T.done)})},c});var ct=typeof Object.assign=="function"?Object.assign:function(a,c){for(var S=1;S<arguments.length;S++){var w=arguments[S];if(w)for(var F in w)Object.prototype.hasOwnProperty.call(w,F)&&(a[F]=w[F])}return a};b("Object.assign",function(a){return a||ct});var Et=this||self,St={facingMode:"user",width:640,height:480};function st(a,c){this.video=a,this.i=0,this.h=Object.assign(Object.assign({},St),c)}st.prototype.stop=function(){var a=this,c,S,w,F;return jt(new At(new Rt(function(U){if(a.g){for(c=a.g.getTracks(),S=N(c),w=S.next();!w.done;w=S.next())F=w.value,F.stop();a.g=void 0}U.j=0})))},st.prototype.start=function(){var a=this,c;return jt(new At(new Rt(function(S){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||alert("No navigator.mediaDevices.getUserMedia exists."),c=a.h,S.return(navigator.mediaDevices.getUserMedia({video:{facingMode:c.facingMode,width:c.width,height:c.height}}).then(function(w){Zt(a,w)}).catch(function(w){var F="Failed to acquire camera feed: "+w;throw console.error(F),alert(F),w}))})))};function R(a){window.requestAnimationFrame(function(){Qt(a)})}function Zt(a,c){a.g=c,a.video.srcObject=c,a.video.onloadedmetadata=function(){a.video.play(),R(a)}}function Qt(a){var c=null;a.video.paused||a.video.currentTime===a.i||(a.i=a.video.currentTime,c=a.h.onFrame()),c?c.then(function(){R(a)}):R(a)}var rt=["Camera"],H=Et;rt[0]in H||typeof H.execScript>"u"||H.execScript("var "+rt[0]);for(var it;rt.length&&(it=rt.shift());)rt.length||st===void 0?H[it]&&H[it]!==Object.prototype[it]?H=H[it]:H=H[it]={}:H[it]=st}).call(xe)),xe}var br=xr();class Ar{constructor(){console.log("HandTracker: Initializing..."),this.hands=new wr.Hands({locateFile:h=>(console.log(`HandTracker: Loading ${h}`),`https://cdn.jsdelivr.net/npm/@mediapipe/hands/${h}`)}),this.hands.setOptions({maxNumHands:1,modelComplexity:1,minDetectionConfidence:.5,minTrackingConfidence:.5}),this.hands.onResults(this.onResults.bind(this)),this.videoElement=document.createElement("video"),this.videoElement.style.display="block",this.videoElement.style.position="absolute",this.videoElement.style.bottom="10px",this.videoElement.style.right="10px",this.videoElement.style.width="160px",this.videoElement.style.zIndex="50",this.videoElement.style.transform="scaleX(-1)",document.body.appendChild(this.videoElement),this.camera=new br.Camera(this.videoElement,{onFrame:async()=>{await this.hands.send({image:this.videoElement})},width:640,height:480}),this.latestLandmarks=null,this.useMouse=!1,this.mousePos={x:0,y:0},this.isMouseDown=!1,window.addEventListener("mousemove",h=>{this.mousePos.x=h.clientX,this.mousePos.y=h.clientY}),window.addEventListener("mousedown",()=>this.isMouseDown=!0),window.addEventListener("mouseup",()=>this.isMouseDown=!1),window.addEventListener("keydown",h=>{h.key==="m"&&(this.useMouse=!this.useMouse,console.log("Mouse Mode:",this.useMouse))})}start(){this.camera.start()}onResults(h){h.multiHandLandmarks&&h.multiHandLandmarks.length>0?this.latestLandmarks=h.multiHandLandmarks[0]:this.latestLandmarks=null}getCursorPosition(){if(this.useMouse)return{...this.mousePos};if(!this.latestLandmarks)return null;const h=this.latestLandmarks[8];return{x:(1-h.x)*window.innerWidth,y:h.y*window.innerHeight}}isPinching(){if(this.useMouse)return this.isMouseDown;if(!this.latestLandmarks)return!1;const h=this.latestLandmarks[8],d=this.latestLandmarks[4],x=h.x-d.x,b=h.y-d.y;return Math.sqrt(x*x+b*b)<.1}}class jr{constructor(h){this.onComplete=h,this.overlay=document.createElement("div"),this.overlay.style.position="absolute",this.overlay.style.top="0",this.overlay.style.left="0",this.overlay.style.width="100%",this.overlay.style.height="100%",this.overlay.style.backgroundColor="rgba(0,0,0,0.8)",this.overlay.style.display="flex",this.overlay.style.flexDirection="column",this.overlay.style.justifyContent="center",this.overlay.style.alignItems="center",this.overlay.style.zIndex="100",this.overlay.style.color="white",this.overlay.style.fontFamily="Inter, sans-serif",this.overlay.style.pointerEvents="auto",this.message=document.createElement("h2"),this.message.innerText="Calibration Required",this.overlay.appendChild(this.message),this.instruction=document.createElement("p"),this.instruction.innerText="Ensure your hand is visible in the preview below, then click Start.",this.overlay.appendChild(this.instruction),this.startButton=document.createElement("button"),this.startButton.innerText="Start Game (Skip Calibration)",this.startButton.style.marginTop="20px",this.startButton.style.padding="10px 20px",this.startButton.style.fontSize="18px",this.startButton.onclick=()=>{this.hide(),this.onComplete&&this.onComplete()},this.overlay.appendChild(this.startButton),document.getElementById("ui-layer").appendChild(this.overlay)}show(){this.overlay.style.display="flex"}hide(){this.overlay.style.display="none"}}class Er{constructor(h){this.gameLoop=h,this.drawer=document.createElement("div"),this.drawer.style.position="absolute",this.drawer.style.top="0",this.drawer.style.right="-300px",this.drawer.style.width="300px",this.drawer.style.height="100%",this.drawer.style.backgroundColor="rgba(30, 30, 30, 0.9)",this.drawer.style.transition="right 0.3s ease",this.drawer.style.padding="20px",this.drawer.style.boxSizing="border-box",this.drawer.style.color="white",this.drawer.style.fontFamily="Inter, sans-serif",this.drawer.style.zIndex="90",this.drawer.style.pointerEvents="auto",this.createControls(),document.getElementById("ui-layer").appendChild(this.drawer),this.toggleBtn=document.createElement("button"),this.toggleBtn.innerText="",this.toggleBtn.style.position="absolute",this.toggleBtn.style.top="20px",this.toggleBtn.style.right="20px",this.toggleBtn.style.zIndex="91",this.toggleBtn.style.background="none",this.toggleBtn.style.border="none",this.toggleBtn.style.fontSize="24px",this.toggleBtn.style.cursor="pointer",this.toggleBtn.style.pointerEvents="auto",this.toggleBtn.onclick=()=>this.toggle(),document.getElementById("ui-layer").appendChild(this.toggleBtn),this.isOpen=!1}createControls(){const h=document.createElement("h2");h.innerText="Settings",this.drawer.appendChild(h),this.addSlider("Sensitivity",.1,2,1,d=>{console.log("Sensitivity:",d)}),this.addSlider("Spawn Rate",.5,3,1,d=>{console.log("Spawn Rate:",d)})}addSlider(h,d,x,b,g){const N=document.createElement("div");N.style.marginBottom="20px";const _=document.createElement("label");_.innerText=h,_.style.display="block",_.style.marginBottom="5px",N.appendChild(_);const G=document.createElement("input");G.type="range",G.min=d,G.max=x,G.step=.1,G.value=b,G.style.width="100%",G.oninput=lt=>g(lt.target.value),N.appendChild(G),this.drawer.appendChild(N)}toggle(){this.isOpen=!this.isOpen,this.drawer.style.right=this.isOpen?"0":"-300px"}}class Sr{constructor(){this.uiLayer=document.getElementById("ui-layer"),this.createHUD(),this.settingsDrawer=new Er,this.calibrationOverlay=new jr(()=>{console.log("Calibration Complete")})}createHUD(){this.hudContainer=document.createElement("div"),this.hudContainer.style.position="absolute",this.hudContainer.style.top="20px",this.hudContainer.style.left="20px",this.hudContainer.style.color="white",this.hudContainer.style.fontFamily="Inter, sans-serif",this.hudContainer.style.fontSize="24px",this.hudContainer.style.textShadow="0 2px 4px rgba(0,0,0,0.5)",this.scoreEl=document.createElement("div"),this.scoreEl.innerText="Score: 0",this.comboEl=document.createElement("div"),this.comboEl.innerText="Combo: 0",this.hudContainer.appendChild(this.scoreEl),this.hudContainer.appendChild(this.comboEl),this.uiLayer.appendChild(this.hudContainer)}update(h,d){this.scoreEl.innerText=`Score: ${h}`,this.comboEl.innerText=`Combo: ${d}`}}class Cr{constructor(){this.particles=[]}emit(h,d,x){for(let b=0;b<10;b++)this.particles.push({x:h,y:d,vx:(Math.random()-.5)*5,vy:(Math.random()-.5)*5,life:1,color:x,size:Math.random()*5+2})}update(h){for(let d=this.particles.length-1;d>=0;d--){const x=this.particles[d];x.x+=x.vx,x.y+=x.vy,x.life-=h*.002,x.life<=0&&this.particles.splice(d,1)}}draw(h){this.particles.forEach(d=>{h.globalAlpha=d.life,h.fillStyle=d.color,h.beginPath(),h.arc(d.x,d.y,d.size,0,Math.PI*2),h.fill()}),h.globalAlpha=1}}class Tr{constructor(){this.ctx=new(window.AudioContext||window.webkitAudioContext)}playPop(){this.ctx.state==="suspended"&&this.ctx.resume();const h=this.ctx.createOscillator(),d=this.ctx.createGain();h.type="sine",h.frequency.setValueAtTime(400,this.ctx.currentTime),h.frequency.exponentialRampToValueAtTime(800,this.ctx.currentTime+.1),d.gain.setValueAtTime(.1,this.ctx.currentTime),d.gain.exponentialRampToValueAtTime(.01,this.ctx.currentTime+.1),h.connect(d),d.connect(this.ctx.destination),h.start(),h.stop(this.ctx.currentTime+.1)}}class Or{constructor(h){this.canvas=h,this.ctx=h.getContext("2d"),this.lastTime=0,this.isRunning=!1,console.log("GameLoop: Constructor"),this.resize(),window.addEventListener("resize",()=>this.resize()),console.log("GameLoop: Init Sky"),this.sky=new yr,console.log("GameLoop: Init BalloonManager"),this.balloonManager=new mr(this.canvas.width,this.canvas.height),console.log("GameLoop: Init HandTracker"),this.handTracker=new Ar;try{this.handTracker.start(),console.log("GameLoop: HandTracker started")}catch(d){console.error("Failed to start HandTracker:",d)}console.log("GameLoop: Init UI/Audio/Particles"),this.uiManager=new Sr,this.particleSystem=new Cr,this.audioManager=new Tr,this.score=0,this.combo=0,this.lastPinchState=!1,this.pinchCooldown=0}resize(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.sky&&this.sky.resize(this.canvas.width,this.canvas.height),this.balloonManager&&this.balloonManager.resize(this.canvas.width,this.canvas.height)}start(){this.isRunning||(this.isRunning=!0,this.lastTime=performance.now(),requestAnimationFrame(h=>this.loop(h)))}stop(){this.isRunning=!1}loop(h){if(!this.isRunning)return;const d=h-this.lastTime;this.lastTime=h,this.update(d),this.draw(),requestAnimationFrame(x=>this.loop(x))}update(h){this.sky.update(h),this.balloonManager.update(h),this.particleSystem.update(h);const d=this.handTracker.getCursorPosition(),x=this.handTracker.isPinching();if(this.pinchCooldown>0&&(this.pinchCooldown-=h),d&&x&&!this.lastPinchState&&this.pinchCooldown<=0){this.pinchCooldown=200;const b=this.balloonManager.checkHit(d.x,d.y);b?(this.score+=10+this.combo*5,this.combo++,this.particleSystem.emit(d.x,d.y,b.color),this.audioManager.playPop(),console.log("Hit! Score:",this.score),this.uiManager.update(this.score,this.combo)):(this.combo=0,this.uiManager.update(this.score,this.combo))}this.lastPinchState=x}draw(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.sky.draw(this.ctx,this.canvas.width,this.canvas.height),this.balloonManager.draw(this.ctx),this.particleSystem.draw(this.ctx);const h=this.handTracker.getCursorPosition(),d=this.handTracker.isPinching();h&&(this.ctx.strokeStyle="red",this.ctx.lineWidth=3,this.ctx.beginPath(),this.ctx.arc(h.x,h.y,15,0,Math.PI*2),this.ctx.moveTo(h.x-20,h.y),this.ctx.lineTo(h.x+20,h.y),this.ctx.moveTo(h.x,h.y-20),this.ctx.lineTo(h.x,h.y+20),this.ctx.stroke(),d&&(this.ctx.fillStyle="rgba(255, 0, 0, 0.5)",this.ctx.fill()))}}document.addEventListener("DOMContentLoaded",()=>{const M=document.getElementById("gameCanvas");new Or(M).start()});
